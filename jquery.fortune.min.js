(function(e){e.fn.roulette=function(t){var n=this;var r=t.prices||8;var i=t.duration||7;var s=t.separation||2;var o=r.length||r;var u=360/o;var a=false;var f=t.onSpinBounce||function(){};n.spin=function(t){t=t||Math.floor(Math.random()*o);var h=e.Deferred();var p=Math.floor(u*(t-1/2)+c(s,u-s));var d=c(10,15);var v=360*d+p;var m=0;var g=false;a=true;n.css({transform:"rotate("+v+"deg)","-webkit-transform":"rotate("+v+"deg)",transition:"transform "+i+"s cubic-bezier(.17,.67,.12,.99)","-webkit-transition":"-webkit-transform "+i+"s cubic-bezier(.17,.67,.12,.99)"}).siblings(".spin").removeClass("bounce");var y=function(){var e=Math.floor(l(n)),t=Math.floor((e+u*.5)%u),r,i=u/5,s=u/10;m=Math.floor(e<m?m-360:m);r=e-m;if(t<i&&r<s||t<i*3&&r>=s){if(!g){n.siblings(".spin").addClass("bounce");f(n.siblings(".spin"));g=true}}else{n.siblings(".spin").removeClass("bounce");g=false}if(a){m=e;requestAnimationFrame(y)}};var b=requestAnimationFrame(y);setTimeout(function(){n.css({transform:"rotate("+p+"deg)","-webkit-transform":"rotate("+p+"deg)",transition:"","-webkit-transition":""}).siblings(".spin").removeClass("bounce");cancelAnimationFrame(b);h.resolve(r[t]||t);a=false},i*1e3);return h.promise()};var l=function(e){var t=0,n=e.css("-webkit-transform")||e.css("-moz-transform")||e.css("-ms-transform")||e.css("-o-transform")||e.css("transform");if(n!=="none"){var t,r=n.split("(")[1].split(")")[0].split(","),i=r[0],s=r[1],o=Math.atan2(s,i);if(o<0){o+=2*Math.PI}t=Math.round(o*(180/Math.PI))}return t};var c=function(e,t){return Math.floor(Math.random()*(t-e+1))+e};return n}})(jQuery);